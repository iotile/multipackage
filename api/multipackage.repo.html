

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>multipackage.repo module &mdash; multipackage latest documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="multipackage.data package" href="multipackage.data.html" />
    <link rel="prev" title="multipackage.manifest module" href="multipackage.manifest.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> multipackage
          

          
          </a>

          
            
            
              <div class="version">
                latest
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../api.html">API Reference</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="multipackage.html">multipackage package</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="multipackage.html#submodules">Submodules</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="multipackage.exceptions.html">multipackage.exceptions module</a></li>
<li class="toctree-l4"><a class="reference internal" href="multipackage.manifest.html">multipackage.manifest module</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">multipackage.repo module</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="multipackage.html#subpackages">Subpackages</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../release.html">Release Notes</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">multipackage</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../api.html">API Reference</a> &raquo;</li>
        
          <li><a href="multipackage.html">multipackage package</a> &raquo;</li>
        
      <li>multipackage.repo module</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/api/multipackage.repo.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-multipackage.repo">
<span id="multipackage-repo-module"></span><h1>multipackage.repo module<a class="headerlink" href="#module-multipackage.repo" title="Permalink to this headline">¶</a></h1>
<p>Main entry point for dealing with repositories.</p>
<div class="section" id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>Classes:</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#multipackage.repo.Component" title="multipackage.repo.Component"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Component</span></code></a></td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#multipackage.repo.EnvironmentVariable" title="multipackage.repo.EnvironmentVariable"><code class="xref py py-obj docutils literal notranslate"><span class="pre">EnvironmentVariable</span></code></a></td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#multipackage.repo.Message" title="multipackage.repo.Message"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Message</span></code></a></td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#multipackage.repo.Repository" title="multipackage.repo.Repository"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Repository</span></code></a></td>
<td>High-level representation of an entire repository.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="reference">
<h2>Reference<a class="headerlink" href="#reference" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="multipackage.repo.Message">
<em class="property">class </em><code class="descclassname">multipackage.repo.</code><code class="descname">Message</code><span class="sig-paren">(</span><em>file</em>, <em>message</em>, <em>suggestion</em>, <em>type</em><span class="sig-paren">)</span><a class="headerlink" href="#multipackage.repo.Message" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code></a></p>
<dl class="attribute">
<dt id="multipackage.repo.Message.file">
<code class="descname">file</code><a class="headerlink" href="#multipackage.repo.Message.file" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 0</p>
</dd></dl>

<dl class="attribute">
<dt id="multipackage.repo.Message.message">
<code class="descname">message</code><a class="headerlink" href="#multipackage.repo.Message.message" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 1</p>
</dd></dl>

<dl class="attribute">
<dt id="multipackage.repo.Message.suggestion">
<code class="descname">suggestion</code><a class="headerlink" href="#multipackage.repo.Message.suggestion" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 2</p>
</dd></dl>

<dl class="attribute">
<dt id="multipackage.repo.Message.type">
<code class="descname">type</code><a class="headerlink" href="#multipackage.repo.Message.type" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 3</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="multipackage.repo.Component">
<em class="property">class </em><code class="descclassname">multipackage.repo.</code><code class="descname">Component</code><span class="sig-paren">(</span><em>name</em>, <em>relative_path</em>, <em>options</em><span class="sig-paren">)</span><a class="headerlink" href="#multipackage.repo.Component" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code></a></p>
<dl class="attribute">
<dt id="multipackage.repo.Component.name">
<code class="descname">name</code><a class="headerlink" href="#multipackage.repo.Component.name" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 0</p>
</dd></dl>

<dl class="attribute">
<dt id="multipackage.repo.Component.options">
<code class="descname">options</code><a class="headerlink" href="#multipackage.repo.Component.options" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 2</p>
</dd></dl>

<dl class="attribute">
<dt id="multipackage.repo.Component.relative_path">
<code class="descname">relative_path</code><a class="headerlink" href="#multipackage.repo.Component.relative_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 1</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="multipackage.repo.EnvironmentVariable">
<em class="property">class </em><code class="descclassname">multipackage.repo.</code><code class="descname">EnvironmentVariable</code><span class="sig-paren">(</span><em>name</em>, <em>subsystem</em>, <em>contexts</em>, <em>usage</em>, <em>required</em>, <em>verify</em><span class="sig-paren">)</span><a class="headerlink" href="#multipackage.repo.EnvironmentVariable" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#tuple" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">tuple</span></code></a></p>
<dl class="attribute">
<dt id="multipackage.repo.EnvironmentVariable.contexts">
<code class="descname">contexts</code><a class="headerlink" href="#multipackage.repo.EnvironmentVariable.contexts" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 2</p>
</dd></dl>

<dl class="attribute">
<dt id="multipackage.repo.EnvironmentVariable.name">
<code class="descname">name</code><a class="headerlink" href="#multipackage.repo.EnvironmentVariable.name" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 0</p>
</dd></dl>

<dl class="attribute">
<dt id="multipackage.repo.EnvironmentVariable.required">
<code class="descname">required</code><a class="headerlink" href="#multipackage.repo.EnvironmentVariable.required" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 4</p>
</dd></dl>

<dl class="attribute">
<dt id="multipackage.repo.EnvironmentVariable.subsystem">
<code class="descname">subsystem</code><a class="headerlink" href="#multipackage.repo.EnvironmentVariable.subsystem" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 1</p>
</dd></dl>

<dl class="attribute">
<dt id="multipackage.repo.EnvironmentVariable.usage">
<code class="descname">usage</code><a class="headerlink" href="#multipackage.repo.EnvironmentVariable.usage" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 3</p>
</dd></dl>

<dl class="attribute">
<dt id="multipackage.repo.EnvironmentVariable.verify">
<code class="descname">verify</code><a class="headerlink" href="#multipackage.repo.EnvironmentVariable.verify" title="Permalink to this definition">¶</a></dt>
<dd><p>Alias for field number 5</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="multipackage.repo.Repository">
<em class="property">class </em><code class="descclassname">multipackage.repo.</code><code class="descname">Repository</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/multipackage/repo.html#Repository"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#multipackage.repo.Repository" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></a></p>
<p>High-level representation of an entire repository.</p>
<p>This is the main class inside <code class="docutils literal notranslate"><span class="pre">multipackage</span></code> that processes a complete
repository.  It reads two files from the repository:</p>
<blockquote>
<div><ul class="simple">
<li>.multipackage/settings.json: The overall settings for this repository</li>
<li>.multipackage/manifest.json: A manifest file of all of the files
multipackage is managing including hashes to check for changes.</li>
</ul>
</div></blockquote>
<p>Using these files, the Repository class will load in the correct
repository template that informs it what other files are managed and how
to parse the settings stored inside <code class="docutils literal notranslate"><span class="pre">settings.json</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – A path to the repository root directory.</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="multipackage.repo.Repository.DEFAULT_TEMPLATE">
<code class="descname">DEFAULT_TEMPLATE</code><em class="property"> = 'pypi_package'</em><a class="headerlink" href="#multipackage.repo.Repository.DEFAULT_TEMPLATE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="multipackage.repo.Repository.MULTIPACKAGE_DIR">
<code class="descname">MULTIPACKAGE_DIR</code><em class="property"> = '.multipackage'</em><a class="headerlink" href="#multipackage.repo.Repository.MULTIPACKAGE_DIR" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="multipackage.repo.Repository.SETTINGS_VERSION">
<code class="descname">SETTINGS_VERSION</code><em class="property"> = '0.1'</em><a class="headerlink" href="#multipackage.repo.Repository.SETTINGS_VERSION" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="multipackage.repo.Repository.SCRIPT_DIR">
<code class="descname">SCRIPT_DIR</code><em class="property"> = '.multipackage/scripts'</em><a class="headerlink" href="#multipackage.repo.Repository.SCRIPT_DIR" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="multipackage.repo.Repository.SETTINGS_FILE">
<code class="descname">SETTINGS_FILE</code><em class="property"> = '.multipackage/settings.json'</em><a class="headerlink" href="#multipackage.repo.Repository.SETTINGS_FILE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="multipackage.repo.Repository.MANIFEST_FILE">
<code class="descname">MANIFEST_FILE</code><em class="property"> = '.multipackage/manifest.json'</em><a class="headerlink" href="#multipackage.repo.Repository.MANIFEST_FILE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="multipackage.repo.Repository.COMPONENT_FILE">
<code class="descname">COMPONENT_FILE</code><em class="property"> = '.multipackage/components.txt'</em><a class="headerlink" href="#multipackage.repo.Repository.COMPONENT_FILE" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="multipackage.repo.Repository.COMPONENT_REGEX">
<code class="descname">COMPONENT_REGEX</code><em class="property"> = '^(?P&lt;package&gt;[a-zA-Z_0-9]+):\\s*(?P&lt;path&gt;[\\.a-zA-Z_\\-0-9\\\\/]+)(?P&lt;options&gt;(\\s*,\\s*[a-zA-Z_0-9_]+\\s*=\\s*[a-zA-Z_0-9_]+)+)?$'</em><a class="headerlink" href="#multipackage.repo.Repository.COMPONENT_REGEX" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="multipackage.repo.Repository.clean">
<code class="descname">clean</code><a class="headerlink" href="#multipackage.repo.Repository.clean" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether we have any errors.</p>
</dd></dl>

<dl class="attribute">
<dt id="multipackage.repo.Repository.settings_changed">
<code class="descname">settings_changed</code><a class="headerlink" href="#multipackage.repo.Repository.settings_changed" title="Permalink to this definition">¶</a></dt>
<dd><p>Whether our settings file on disk has been changed.</p>
</dd></dl>

<dl class="method">
<dt id="multipackage.repo.Repository.error">
<code class="descname">error</code><span class="sig-paren">(</span><em>file</em>, <em>message</em>, <em>suggestion</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/multipackage/repo.html#Repository.error"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#multipackage.repo.Repository.error" title="Permalink to this definition">¶</a></dt>
<dd><p>Record an error.</p>
</dd></dl>

<dl class="method">
<dt id="multipackage.repo.Repository.warning">
<code class="descname">warning</code><span class="sig-paren">(</span><em>file</em>, <em>message</em>, <em>suggestion</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/multipackage/repo.html#Repository.warning"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#multipackage.repo.Repository.warning" title="Permalink to this definition">¶</a></dt>
<dd><p>Record a warning.</p>
</dd></dl>

<dl class="method">
<dt id="multipackage.repo.Repository.info">
<code class="descname">info</code><span class="sig-paren">(</span><em>file</em>, <em>message</em>, <em>suggestion</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/multipackage/repo.html#Repository.info"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#multipackage.repo.Repository.info" title="Permalink to this definition">¶</a></dt>
<dd><p>Record an info message.</p>
</dd></dl>

<dl class="method">
<dt id="multipackage.repo.Repository.iter_messages">
<code class="descname">iter_messages</code><span class="sig-paren">(</span><em>message_type</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/multipackage/repo.html#Repository.iter_messages"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#multipackage.repo.Repository.iter_messages" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over all messages of a given type.</p>
<p>The message_type parameter must be one of info, warning or error and
those messages will be returned in the order they were added to the
Repository.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>message_type</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The type of message that you want to iterate
over.  One of “info”, “warning”, or “error”.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">An iterable of Message objects.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">iterable of Message</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="multipackage.repo.Repository.count_messages">
<code class="descname">count_messages</code><span class="sig-paren">(</span><em>message_type</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/multipackage/repo.html#Repository.count_messages"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#multipackage.repo.Repository.count_messages" title="Permalink to this definition">¶</a></dt>
<dd><p>Count how many messages of a given type there are.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>message_type</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The type of message that you want to iterate
over.  One of “info”, “warning”, or “error”.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">The number of messages of the given type.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.7)">int</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="multipackage.repo.Repository.add_subsystem">
<code class="descname">add_subsystem</code><span class="sig-paren">(</span><em>subsystem</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/multipackage/repo.html#Repository.add_subsystem"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#multipackage.repo.Repository.add_subsystem" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a subsystem to this repository.</p>
</dd></dl>

<dl class="method">
<dt id="multipackage.repo.Repository.required_secret">
<code class="descname">required_secret</code><span class="sig-paren">(</span><em>name</em>, <em>subsystem</em>, <em>usage</em>, <em>verify=None</em>, <em>context='all'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/multipackage/repo.html#Repository.required_secret"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#multipackage.repo.Repository.required_secret" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a required environment variable.</p>
<p>See the documentation for Repository.add_secret().</p>
</dd></dl>

<dl class="method">
<dt id="multipackage.repo.Repository.optional_secret">
<code class="descname">optional_secret</code><span class="sig-paren">(</span><em>name</em>, <em>subsystem</em>, <em>usage</em>, <em>verify=None</em>, <em>context='all'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/multipackage/repo.html#Repository.optional_secret"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#multipackage.repo.Repository.optional_secret" title="Permalink to this definition">¶</a></dt>
<dd><p>Add an optional environment variable.</p>
<p>See the documentation for Repository.add_secret().</p>
</dd></dl>

<dl class="method">
<dt id="multipackage.repo.Repository.add_secret">
<code class="descname">add_secret</code><span class="sig-paren">(</span><em>name</em>, <em>subsystem</em>, <em>usage</em>, <em>required</em>, <em>verify=None</em>, <em>context='all'</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/multipackage/repo.html#Repository.add_secret"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#multipackage.repo.Repository.add_secret" title="Permalink to this definition">¶</a></dt>
<dd><p>Add an optional or required environment variable.</p>
<p>Environment variables are needed when Repository.update() is called
and are used to convey secret information that must be encrypted and
stored in the repository itself.  The way this information is used
and what specific environment variables are required is 100% decided
by the RepositoryTemplate that is managing the repository.</p>
<p>This method exists for the RepositoryTemplate to convey to the
Repository class what environment variables it needs and whether they
are required or optional.  If the relevant subsystem has a method
of verifying the contents of the environment variable, it can also
pass a callable function in the verify parameter that will be used
to verify the value of the environment variable.</p>
<p>This method can be called multiple times with the same <code class="docutils literal notranslate"><span class="pre">name</span></code>
parameter by different subsystems if they both use the same
enviornment variable.</p>
<p>The context parameter must be a comma separated list with each entry
being one of “update”, “all”, “build”, “deploy”.  The context
parameter controls when an environment variable is needed.  It is used
to get lists of all environment variables that might be needed during,
e.g. building or deploying a project.  Only variables marked for a
given context are provided when that context runs.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The name of the environment variable</li>
<li><strong>subsystem</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The name of the subsystem that needs the variable</li>
<li><strong>usage</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – A short, one line description of how the variable is
used by the subsystem.</li>
<li><strong>required</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – Whether the variable is optional or required.</li>
<li><strong>verify</strong> (<em>callable</em>) – Optional callable with signature:
callable(name, value) that is called with the name and value
of the environment variable as strings and should return None
if the variable is valid.  If the variable is invalid, it
should return a <code class="docutils literal notranslate"><span class="pre">str</span></code> instance with a short message
describing why the variable’s contents are not valid.</li>
<li><strong>context</strong> (<em>list of str</em>) – A comma separated list of contexts during
which this environment variable is needed.  Supported contexts
are update, all, build an deploy.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="multipackage.repo.Repository.iter_secrets">
<code class="descname">iter_secrets</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/multipackage/repo.html#Repository.iter_secrets"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#multipackage.repo.Repository.iter_secrets" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over all declared secrets.</p>
</dd></dl>

<dl class="method">
<dt id="multipackage.repo.Repository.get_secret">
<code class="descname">get_secret</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/multipackage/repo.html#Repository.get_secret"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#multipackage.repo.Repository.get_secret" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the value of a secret from the user’s environment.</p>
<p>If the secret is marked as required and it is not present, an
exception is raised, otherwise None is returned when the value
is not present.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The name of the secret that was previously registered
with add_secret(), required_secret(), or optional_secret().</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The secret’s value or None if it is optional and not present.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a></p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><code class="xref py py-exc docutils literal notranslate"><span class="pre">InvalidEnvironmentError</span></code> – If the secret is required and not present.</li>
<li><code class="xref py py-exc docutils literal notranslate"><span class="pre">IntenalError</span></code> – If <code class="docutils literal notranslate"><span class="pre">name</span></code> was never declared as a secret.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="multipackage.repo.Repository.iter_context">
<code class="descname">iter_context</code><span class="sig-paren">(</span><em>context</em>, <em>include_empty=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/multipackage/repo.html#Repository.iter_context"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#multipackage.repo.Repository.iter_context" title="Permalink to this definition">¶</a></dt>
<dd><p>Iterate over environment variables applicable to a given context.</p>
<p>The <cite>context</cite> parameter must be one of ‘update’, ‘build’, or ‘deploy’
and will be used to select environment variables needed in that
context.</p>
<p>The variables will be yielded in sorted order by name for consistency.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>context</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The context we wish to get variables for.  Must
be one of update, build or deploy.  Variables marked with
all will be returned for all contexts.</li>
<li><strong>include_empty</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – Also yield None for optional environement
variables that are not defined in the user’s ENVIRONMENT.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><p>An iterable of variable name and value.</p>
<p>Each variable that is marked with the passed context will be
returned as part of the iterable in stable sorted order.  If the
variable is marked as optional and it is not defined in the
process’s environment, then a None value will be yielded if
include_empty is True (the default behvaior), otherwise the
variable will be skipped as if it were not declared at all.</p>
</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">iterable of str, <a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="multipackage.repo.Repository.get_setting">
<code class="descname">get_setting</code><span class="sig-paren">(</span><em>name</em>, <em>default=&lt;object object&gt;</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/multipackage/repo.html#Repository.get_setting"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#multipackage.repo.Repository.get_setting" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the value of a setting from the options dictionary.</p>
<p>The name of the setting can be a series of dot separated identifiers
that will be resolved recursively into subkeys.</p>
<p>For example, “doc.deploy” would be the key “deploy” in a dictionary
assigned to the key “doc”.  “doc” would return the entire doc
dictionary.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The name of the setting that we want to fetch.</li>
<li><strong>default</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><em>object</em></a>) – If the setting is optional, you can specify
a default value.  The default behavior is to raise an
exception when a setting is missing.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The value of the setting.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)">str</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="multipackage.repo.Repository.set_setting">
<code class="descname">set_setting</code><span class="sig-paren">(</span><em>name</em>, <em>value</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/multipackage/repo.html#Repository.set_setting"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#multipackage.repo.Repository.set_setting" title="Permalink to this definition">¶</a></dt>
<dd><p>Change or set an option in settings.json.</p>
<p>The change is flushed out to the settings file immediately.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The name of the setting you want to set or change.</li>
<li><strong>value</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#object" title="(in Python v3.7)"><em>object</em></a>) – A json serializable value.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="multipackage.repo.Repository.initialize">
<code class="descname">initialize</code><span class="sig-paren">(</span><em>clean=False</em>, <em>platforms=('macos'</em>, <em>'windows'</em>, <em>'linux')</em>, <em>python_versions=('2.7'</em>, <em>'3.6')</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/multipackage/repo.html#Repository.initialize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#multipackage.repo.Repository.initialize" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize or reinitialize this repository.</p>
</dd></dl>

<dl class="method">
<dt id="multipackage.repo.Repository.ensure_lines">
<code class="descname">ensure_lines</code><span class="sig-paren">(</span><em>relative_path</em>, <em>lines</em>, <em>match=None</em>, <em>present=True</em>, <em>multi=False</em>, <em>delimiter_start='#'</em>, <em>delimiter_end=''</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/multipackage/repo.html#Repository.ensure_lines"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#multipackage.repo.Repository.ensure_lines" title="Permalink to this definition">¶</a></dt>
<dd><p>Ensure that the following lines are in the given file.</p>
<p>This will create or update a ManagedSection and ensure that the
following lines are all present in that file.  The lines are assumed
to be unordered so they are added independently of each other.</p>
<p>This method is idempotent. It will only add a line to the file if it
does not already exist.</p>
<p>The lines are automatically saved to disk.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>relative_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The relative path to the file that we want to
update.</li>
<li><strong>lines</strong> (<em>list of str</em>) – A list of strings to add to the given file if
they do not exist.</li>
<li><strong>present</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – If True, ensure lines are present (the default), if
False, ensure lines are absent.</li>
<li><strong>match</strong> (<em>list of str</em>) – A list of regular expressions to
use to match against a line.  If passed it must have the same
length as lines and will be paired with each line in lines in
order to determine which line matches.</li>
<li><strong>multi</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – If true, allow for matching and updating multiple lines
for each line in <code class="docutils literal notranslate"><span class="pre">lines</span></code>.  If False, InternalError is raised
if there are multiple lines matching a given line.</li>
<li><strong>delimiter_start</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The character string that starts a managed file
section block header line.  This is usually a comment character
like ‘#’.</li>
<li><strong>delimiter_end</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – Optional charcter string that ends
a managed file section block header line.  This defaults to
None but can be set to a value if comments need to be explicitly
closed such as delimiter_start=”&lt;!– “, delimiter_end=” –&gt;”.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="multipackage.repo.Repository.ensure_directory">
<code class="descname">ensure_directory</code><span class="sig-paren">(</span><em>relative_path</em>, <em>gitkeep=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/multipackage/repo.html#Repository.ensure_directory"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#multipackage.repo.Repository.ensure_directory" title="Permalink to this definition">¶</a></dt>
<dd><p>Ensure that a given directory exists.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>relative_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The relative path to the directory that we
wish to check.</li>
<li><strong>gitkeep</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – Also insert an unmanaged .gitkeep file to ensure
the directory is saved in the git repo history.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="multipackage.repo.Repository.ensure_script">
<code class="descname">ensure_script</code><span class="sig-paren">(</span><em>relative_path</em>, <em>source</em>, <em>present=True</em>, <em>overwrite=True</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/multipackage/repo.html#Repository.ensure_script"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#multipackage.repo.Repository.ensure_script" title="Permalink to this definition">¶</a></dt>
<dd><p>Ensure that a script file is copied.</p>
<p>This function will copy or remove the given script file. All script
files come from the multipackage/data/scripts folder.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>relative_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The relative path to the file that we want to
update.</li>
<li><strong>source</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The name of the template file to render</li>
<li><strong>present</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – If True, ensure lines are present (the default), if
False, ensure lines are absent.</li>
<li><strong>overwrite</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – Overwrite the file if it exists already. Setting this
to False will ensure that the file is added only if is absent,
allowing for initializing files that are not present without
subsequently overwriting them.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="multipackage.repo.Repository.ensure_template">
<code class="descname">ensure_template</code><span class="sig-paren">(</span><em>relative_path</em>, <em>template</em>, <em>variables=None</em>, <em>present=True</em>, <em>overwrite=True</em>, <em>raw=False</em>, <em>filters=None</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/multipackage/repo.html#Repository.ensure_template"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#multipackage.repo.Repository.ensure_template" title="Permalink to this definition">¶</a></dt>
<dd><p>Ensure that the contents of a given file match a template.</p>
<p>This function will render the given template shipped with the
multipackage package.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>relative_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The relative path to the file that we want to
update.</li>
<li><strong>template</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.7)"><em>str</em></a>) – The name of the template file to render</li>
<li><strong>variables</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><em>dict</em></a>) – A set of substitution variables to fill into
the template.</li>
<li><strong>present</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – If True, ensure lines are present (the default), if
False, ensure lines are absent.</li>
<li><strong>overwrite</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – Overwrite the file if it exists already. Setting this
to False will ensure that the file is added only if is absent,
allowing for initializing files that are not present without
subsequently overwriting them.</li>
<li><strong>raw</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.7)"><em>bool</em></a>) – Do not actually fill in the template, just copy it into place.
This is useful if the file itself is a jinja2 template that should
be rendered later.</li>
<li><strong>filters</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.7)"><em>dict</em></a>) – Optional dictionary of callable filters that will be passed
to jinja2 for use in the template formatting.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="multipackage.repo.Repository.update">
<code class="descname">update</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/multipackage/repo.html#Repository.update"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#multipackage.repo.Repository.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Update all of the managed files in this multipackage installation.</p>
<p>This method delegates to all of the enabled multipackage subsystems to
actually update each subcomponent.</p>
</dd></dl>

</dd></dl>

</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="multipackage.data.html" class="btn btn-neutral float-right" title="multipackage.data package" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="multipackage.manifest.html" class="btn btn-neutral float-left" title="multipackage.manifest module" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018 Arch Systems Inc.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>